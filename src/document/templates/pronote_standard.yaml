template:
  name: "pronote_standard"
  version: "2.0"

# Champs extraits du texte brut du PDF (PDFContent.text)
fields:
  absences:
    method: "key_value"
    key: "Absences?"
    extract: "number"
    cast: "int"

  absences_justifiees:
    method: "key_value"
    key: "Absences?"
    extract: "contains"
    contains: "justifi"

  retards:
    method: "key_value"
    key: "Retards?"
    extract: "number"
    cast: "int"

  engagements:
    method: "key_value"
    key: "Engagements?"
    extract: "engagements"

  moyenne_generale:
    method: "key_value"
    key: "Moyenne\\s+g[ée]n[ée]rale"
    extract: "number"

  annee_scolaire:
    method: "key_value"
    key: "Ann[ée]e scolaire"

  trimestre:
    method: "regex"
    pattern: "(?:Bulletin du |Trimestre\\s*)(\\d)[eè]r?e?\\s*(?:Trimestre)?"
    cast: "int"

  classe:
    method: "regex"
    pattern: "^(\\d+[A-Z]+)\\s*\\("

  effectif:
    method: "regex"
    pattern: "\\((\\d+)\\s+[ée]l[èe]ves?\\)"
    cast: "int"

  prof_principal:
    method: "key_value"
    key: "Professeur principal"

  # Absences et retards peuvent aussi venir du footer de la table (PRONOTE).
  # Le parser fusionnera les deux sources (texte libre + footer).

# Regles d'extraction des tableaux de matieres
tables:
  min_rows: 2
  columns:
    matiere_and_prof: 0
    notes: 1
    programme: 2
    appreciation: 3
  prof_in_matiere_col: true
  footer_marker: "Absences"
  min_appreciation_length: 5
